<div class="info-wrapper">

  <div class="left-panel">
    <div class="cube info-cube" [class.selected]="selectedInfo === 'apps'" (click)="selectInfo('apps')">
      <span class="icon">
        <app-svg-icon name="info-apps"></app-svg-icon>
      </span>
      <span class="text">Apps</span>
    </div>
    <div class="cube info-cube" [class.selected]="selectedInfo === 'tasks'" (click)="selectInfo('tasks'); getTasks()">
      <span class="icon">
        <app-svg-icon name="info-tasks"></app-svg-icon>
      </span>
      <span class="text">Tasks view</span>
    </div>
  </div>
  <div class="center-panel" *ngIf="selectedInfo === 'apps'">
    <div *ngFor="let task of tasks" class="cube intel-cube" [class.selected]="selectedIntel === task.name"
      (click)="selectIntel(task.name)">
      <span class="icon">
        <app-svg-icon [name]="task.name" [size]="17"></app-svg-icon>
      </span>
      <span class="text">{{task.display_name}}</span>
      <span class="state-icon" (click)="taskAction($event, task.state)">
        <app-svg-icon [name]="task.state"></app-svg-icon>
      </span>

    </div>
  </div>
  <div class="intels-panel" *ngIf="selectedInfo === 'apps'">
    <intel-device-info [deviceInfo]="data" class="intel" *ngIf="selectedIntel === 'DEVICE INFO'"></intel-device-info>
    <intel-chats class="intel" [messages]="messages" [sessions]="sessions" [calls]="calls"
      *ngIf="['WHATSAPP','TELEGRAM','WECHAT','LINE','SMS', 'SIGNAL'].includes(selectedIntel)"
      (selectSession)="onSelectSession($event)">
    </intel-chats>
    <intel-contacts class="intel" [contacts]='contacts' *ngIf="selectedIntel === 'CONTACTS'"></intel-contacts>
    <intel-call-history class="intel" [data]='callHistory' *ngIf="selectedIntel === 'CALL_HISTORY'">
    </intel-call-history>
    <intel-passwords class="intel" [data]='passwords' *ngIf="selectedIntel === 'KEYCHAINS'"></intel-passwords>
    <intel-app-list class="intel" [data]='data' *ngIf="selectedIntel === 'Apps' && data.length > 0"></intel-app-list>
    <intel-browser class="intel" [data]='browser' *ngIf="selectedIntel === 'BROWSER'"></intel-browser>
  </div>


  <div class="tasks-view" *ngIf="selectedInfo === 'tasks'">
    <intel-tasks></intel-tasks>
  </div>

</div>
