<div  class="sources-wrapper">

  <app-left-bar [missionData]="missionData"></app-left-bar>

  <div class="sources-list-wrapper">
      <div class="filters">
          <span [class.selected]="filterValue === ''" (click)="setFilter('')">All sources</span>
          <span [class.selected]="filterValue === 'DOWNLOADING'" (click)="setFilter('DOWNLOADING')">Downloading</span>
          <span [class.selected]="filterValue === 'ACTIVE'" (click)="setFilter('ACTIVE')">Active</span>
          <span [class.selected]="filterValue === 'LOST_CONNECTION'" (click)="setFilter('LOST_CONNECTION')">Lost Connection</span>
          <span [class.selected]="filterValue === 'TERMINATED'" (click)="setFilter('TERMINATED')">Terminated</span>
      </div>
    <ul class="sources-list">
        <p *ngIf="filteredSources.length === 0" class="no-items">No sources are {{filterValue | lowercase}}</p>
      <li class="source-cube" *ngFor="let source of filteredSources">
        <div class="source-img">
          <img *ngIf="source.ios?.profile_pics[0]" src="{{source.ios?.profile_pics[0]}}">
          <app-svg-icon *ngIf="!source.ios?.profile_pics[0]" name="avatar" [size]="85"  class="cube-person-img"></app-svg-icon>
        </div>
        <div class="source-info-wrapper">
        <div class="source-info">
            <p class="source-name">{{source.name}}</p>
            <p class="source-number">{{source.tip?.phone_number}}</p>
            <div class="source-phone-info">
                <span class="phone-model">{{source.tip?.device}} </span>
                <span class="phone-version">{{source.ios?.version}}</span>
                <!-- <app-svg-icon class="phone-battery" [name]="getBatteryIcon(source.ios?.indicators?.battery)" [size]="13" [ngStyle]="{'color': getBatteryIcon(source.ios?.indicators?.battery) === 'device-battery-empty'? '#ff4d6a' : '#c4e1ff'}">
                </app-svg-icon> -->
                <!-- <app-svg-icon class="phone-wifi" [name]="getWifiStatus()" [size]="13">
                </app-svg-icon> -->

            </div>
        </div>
            <div class="device-status">
                <!-- <app-svg-icon name="inactive" [size]=32></app-svg-icon> -->
                <lottie-animation-view *ngIf="isAnimatedIcon(source); else noAnimatedIcon" [options]="setAnimatedIcon(source).options"
                  [width]="setAnimatedIcon(source).width" [height]="setAnimatedIcon(source).height">
                </lottie-animation-view>
                <ng-template #noAnimatedIcon>
                  <app-svg-icon [size]="23" [name]="source.state"></app-svg-icon>
                </ng-template>
                <span class="device-status-text"
                 [ngClass]="source.state === 'LOST_CONNECTION' ? 'red' : (source.state === 'DOWNLOADING' ? 'green' : '')">
                 {{deviceStatusToText(source)}}</span>
            </div>
        </div>
      </li>
    </ul>
  </div>
  <app-right-bar [events]="events"></app-right-bar>
</div>

