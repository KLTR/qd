<div class="sidebar">
  <!-- This section shoudl be at the TOP-->
  <div class="section sources">
    <div class="header">Sources</div>
    <div class="content">
      <div class="items" *ngFor="let source of missionData?.sources" 
      (mouseenter)="source.hover=true;"
       (mouseleave)="source.hover=false;">
        <span class="name">{{source.source?.name}}</span>

        <span class="device-status">
          <app-svg-icon 
           (click)="selectSource(source);sourcePop.toggle()"
            class="info-icon" name="info-second"  [satPopoverAnchorFor]="sourcePop"  [size]="12">
          </app-svg-icon>
          <lottie-animation-view [options]="setAnimatedIcon().options" [width]="setAnimatedIcon().width" [height]="setAnimatedIcon().height">
          </lottie-animation-view>
        </span>

        <!-- <span *ngIf="isAnimatedIcon(source?.status)" class="device-status animated">
            <div class="percent-icon" *ngIf="source.status === 'downloading'">
                <span class="percent">{{source.progress?.percentage}}%</span>
              </div>
              <div (mouseenter)="toggleShowInfoIcon(true)" (mouseleave)="toggleShowInfoIcon(false)">
                <lottie-animation-view *ngIf="source.status !== 'downloading'" [options]="source.icon.options" [width]="icon.size.width"
                  [height]="icon.size.height">
                </lottie-animation-view>
                <lottie-animation-view *ngIf="source.status === 'downloading'" [options]="source.icon.options" [width]="icon.size.width"
                  [height]="icon.size.height">
                </lottie-animation-view>
              </div>
        </span> -->
      </div>
    </div>
  </div>
  <!-- /Section Sources -->
  <div class="section pending">
    <div class="header">Infecting</div>
    <div class="content">
      <div class="items" *ngFor="let infection of missionData?.infections">
        <span class="name">{{infection.infection?.name}}</span>
        <span class="device-status" *ngIf="infection.infection?.state">
          <app-svg-icon [name]="infection.infection.state" [size]="18"></app-svg-icon>
        </span>
      </div>
    </div>
  </div>
  <div class="section targets">
    <div class="header">Targets</div>
    <div class="content">
      <div class="items" *ngFor="let target of missionData?.targets">
        <span class="name">{{target.target?.name}}</span>
        <span class="icon">
          <span class="device-count {{target.state}}">{{target?.devices_count}}</span>
          <app-svg-icon [size]="17" name="target_{{target.state}}"></app-svg-icon>
        </span>
      </div>
    </div>
  </div>

  <div class="add-target" (click)="openWizard()">
    <img src="../../../assets/img/svg/add-target.svg">
    <p> Add Target</p>
  </div>
</div>

<app-add-target-wizard *ngIf="isWizardOpen" (closeModal)="closeWizard()"></app-add-target-wizard>


<sat-popover #sourcePop xAlign="start" yAlign="center" >
    <app-device-tooltip *ngIf="selectedSource" [device]="selectedSource" (close)="closeT()"></app-device-tooltip>
</sat-popover>