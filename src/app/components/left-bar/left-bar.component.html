<div class="sidebar">
  <!-- This section shoudl be at the TOP-->
  <div class="section sources">
    <div class="header">Sources</div>
    <div class="content">
      <div class="items" *ngFor="let source of missionData?.sources; let i = index;" 
      (mouseenter)="source.hover=true;"
      (mouseleave)="source.hover=false;">

        <sat-popover xAlign="start" yAlign="center">
          <app-device-tooltip *ngIf="selectedSource" [device]="selectedSource" (close)="closeT(i)"></app-device-tooltip>
        </sat-popover>

        <span class="name">{{source.source?.name}}</span>
        <span class="device-status">

          <span class="icon-wrapper"
           *ngIf="popovers?.first && source.hover"
           (click)="selectSource(source);getCurrentPopover(i).toggle();"
           [satPopoverAnchorFor]="getCurrentPopover(i)"
           >
            <app-svg-icon  
              class="info-icon" name="info-second" [size]="12">
            </app-svg-icon>
          </span>

          <lottie-animation-view *ngIf="isAnimatedIcon(source); else noAnimatedIcon" [options]="setAnimatedIcon(source).options"
            [width]="setAnimatedIcon(source).width" [height]="setAnimatedIcon(source).height">
          </lottie-animation-view>

          <ng-template #noAnimatedIcon>
            <app-svg-icon class="device-status-icon" [size]="23" [name]="source.state"></app-svg-icon>
          </ng-template>

        </span>
      </div>
    </div>
  </div>
  <!-- /Section Sources -->
  <div class="section pending">
    <div class="header">Infecting</div>
    <div class="content">
      <div class="items" *ngFor="let infection of missionData?.infections">
        <span class="name">{{infection.infection?.name}}</span>
        <span class="device-status" *ngIf="infection.infection?.state">
          <app-svg-icon [name]="infection.infection.state" [size]="18"></app-svg-icon>
        </span>
      </div>
    </div>
  </div>
  <div class="section targets">
    <div class="header">Targets</div>
    <div class="content">
      <div class="items" *ngFor="let target of missionData?.targets">
        <span class="name">{{target.target?.name}}</span>
        <span class="icon">
          <span class="device-count {{target.state}}">{{target?.devices_count}}</span>
          <app-svg-icon [size]="17" name="target_{{target.state}}"></app-svg-icon>
        </span>
      </div>
    </div>
  </div>

  <div class="add-target" (click)="openWizard()">
    <img src="../../../assets/img/svg/add-target.svg">
    <p> Add Target</p>
  </div>
</div>

<app-add-target-wizard *ngIf="isWizardOpen" (closeModal)="closeWizard()"></app-add-target-wizard>
